@import "tailwindcss";
@import "tw-animate-css";

@custom-variant dark (&:is(.dark *));

@theme {
  --font-sans: 'Poppins', sans-serif;
  --color-primary: rgb(78, 185, 197);
  --color-primary-hover: rgb(67, 174, 185);
  --color-primary-focus: rgb(58, 162, 173);
  --color-primary-disabled: rgb(179, 221, 227);
  --color-secondary: rgb(236, 153, 146);
  --color-secondary-hover: rgb(234, 140, 143);
  --color-secondary-focus: rgb(221, 121, 124);
  --color-secondary-disabled: rgb(247, 197, 199);
  --color-primary-text: rgb(36, 59, 60);
  --color-secondary-text: rgb(104, 142, 144);
  --color-muted-jade: rgb(79, 143, 137);
  --color-primary-bg: rgb(250, 255, 255);
  --color-secondary-bg: rgb(227, 242, 240);
  --color-tertiary-bg: rgb(152, 176, 172);
  --color-success: rgb(86, 176, 161, 0.15);
  --color-error: rgb(236, 212, 210);
  --color-word:  rgba(150, 170, 220, 1);
  --color-very-low:   rgba(224, 120, 120, 0.65); /* Rojo rosado pastel */
  --color-low:        rgba(236, 160, 120, 0.65); /* Coral suave */
  --color-medium:     rgba(240, 205, 120, 0.65); /* Dorado mantequilla */
  --color-high:       rgba(150, 170, 220, 0.65); /* Azul lavanda */
  --color-very-high:  rgba(140, 200, 160, 0.65); /* Verde agua menta */
  --color-neutral:    rgb(166, 148, 204);    /* Lavanda suave */
}

.zoomed-look {
  transform: scale(0.9);
  transform-origin: top left;
}

/* sombra jadeada */
.shadow-muted-jade {
  box-shadow: 0 4px 12px rgba(79, 143, 137, 0.2); /* color-muted-jade */
}

/* sombra azulada tipo primary */
.shadow-primary {
  box-shadow: 0 4px 12px rgba(78, 185, 197, 0.25); /* color-primary */
}

/* sombra suave para fondo claro */
.shadow-primary-bg {
  box-shadow: 0 4px 10px rgba(240, 250, 249, 0.4); /* color-primary-bg */
}

/* sombra suave para fondo secundario */
.shadow-secondary-bg {
  box-shadow: 0 4px 10px rgba(227, 242, 240, 0.4); /* color-secondary-bg */
}

.shadow-secondary-inner {
  box-shadow: inset 0 0px 6px rgba(236, 153, 146, 0.35); /* color-secondary */
}

.glass-primary {
  backdrop-filter: blur(4px);
  background-color: rgb(240, 250, 249, 0.35);
  border: 1px solid rgba(240, 250, 249, 0.6);
  box-shadow: 0 6px 16px rgba(78, 185, 197, 0.25);
}
.glass-secondary {
  backdrop-filter: blur(4px);
  background-color: rgb(227, 242, 240, 0.8);
  border: 1px solid rgba(236, 153, 146, 0.4);
}

.glass-neutral-bg {
  backdrop-filter: blur(4px);
  background-color: rgba(166, 148, 204, 0.15);
  border: 1px solid rgba(166, 148, 204, 0.3);
  box-shadow: 0 8px 20px rgba(166, 148, 204, 0.10);
  transition: box-shadow 0.3s ease, box-shadow 0.3s ease;
}

.glass-neutral {
  backdrop-filter: blur(4px);
  background-color: rgba(166, 148, 204, 0.25);
  border: 1px solid rgba(166, 148, 204, 0.3);
  box-shadow: 0 8px 20px rgba(166, 148, 204, 0.10);
  transition: box-shadow 0.3s ease, box-shadow 0.3s ease;
}

.glass-secondary-bg {
  backdrop-filter: blur(4px);
  background-color: rgba(67, 174, 185, 0.25);
  border: 1px solid rgba(215, 235, 232, 0.5);
  box-shadow: 0 8px 20px rgba(78, 185, 197, 0.10);
  transition: box-shadow 0.3s ease, box-shadow 0.3s ease;
}

.glass-tertiary-bg {
  backdrop-filter: blur(4px);
  background-color: rgba(79, 143, 137, 0.35);
  border: 1px solid rgba(215, 235, 232, 0.5);
  box-shadow: 0 8px 20px rgba(78, 185, 197, 0.15);
  transition: box-shadow 0.3s ease, box-shadow 0.3s ease;
}

.glass-secondary-bg:hover {
  box-shadow: 0 0 0 3px rgba(215, 235, 238, 0.4),
              0 8px 20px rgba(78, 185, 197, 0.15);
}

.glass-secondary-bg:focus-within {
  box-shadow: 0 0 0 4px rgba(215, 235, 238, 0.65),
              0 8px 20px rgba(78, 185, 197, 0.15);
}

.glass-primary-bg {
  background-color: rgba(234, 244, 247, 0.85);
  backdrop-filter: blur(6px) saturate(1.15); 
  border: 1px solid rgba(215, 235, 232, 0.5);
  box-shadow: 0 6px 18px rgba(160, 190, 192, 0.12);
  transition: box-shadow 0.3s ease, background-color 0.3s ease;
}

/* iOS-like glass usando primary */
.glass-ios-primary {
  --glass-bg1: rgb(from var(--primary) r g b / 0.16);
  --glass-bg2: rgb(from var(--primary) r g b / 0.08);
  --glass-ring: rgb(from var(--primary) r g b / 0.35);

  border-radius: var(--radius-lg);
  background: linear-gradient(to bottom right, var(--glass-bg1), var(--glass-bg2));
  backdrop-filter: blur(12px) saturate(1.6);
  -webkit-backdrop-filter: blur(12px) saturate(1.6);
  border: 1px solid rgb(255 255 255 / 0.38);
  box-shadow:
    0 8px 20px rgb(from var(--primary) r g b / 0.15),
    0 1px 0 rgb(255 255 255 / 0.35) inset,
    0 -1px 0 rgb(0 0 0 / 0.06) inset;
  transition: background .25s ease, box-shadow .25s ease;
}

.glass-ios-primary:hover {
  background: linear-gradient(
    to bottom right,
    rgb(from var(--primary) r g b / 0.20),
    rgb(from var(--primary) r g b / 0.10)
  );
  box-shadow:
    0 10px 24px rgb(from var(--primary) r g b / 0.22),
    0 1px 0 rgb(255 255 255 / 0.38) inset,
    0 -1px 0 rgb(0 0 0 / 0.08) inset;
}

.glass-ios-primary:focus-within {
  outline: none;
  box-shadow:
    0 0 0 3px var(--glass-ring),
    0 8px 20px rgb(from var(--primary) r g b / 0.18);
}

/* soft highlight */
.glass-ios-primary::after {
  content: "";
  inset: 0;
  border-radius: inherit;
  pointer-events: none;
  background: radial-gradient(200% 140% at 0% 0%, rgb(255 255 255 / 0.24), transparent 55%);
  mix-blend-mode: soft-light;
}

/* Dark mode */
.dark .glass-ios-primary {
  background: linear-gradient(
    to bottom right,
    rgb(from var(--primary) r g b / 0.16),
    rgb(0 0 0 / 0.22)
  );
  border: 1px solid rgb(255 255 255 / 0.12);
  box-shadow:
    0 8px 24px rgb(0 0 0 / 0.35),
    0 1px 0 rgb(255 255 255 / 0.06) inset,
    0 -1px 0 rgb(0 0 0 / 0.35) inset;
}

/* iOS-like glass (más opaco) usando primary */
.glass-ios-primary-strong {
  --glass-bg1: rgb(from var(--primary) r g b / 0.65); /* ↑ opacidad */
  --glass-bg2: rgb(from var(--primary) r g b / 0.48);
  --glass-ring: rgb(from var(--primary) r g b / 0.35);

  /* ↑ blur y baja brillo para “apagar” el fondo */
  --glass-blur: 30px;
  --glass-brightness: 0.72;

  border-radius: var(--radius-sm);
  background: linear-gradient(to bottom right, var(--glass-bg1), var(--glass-bg2));
  backdrop-filter: blur(var(--glass-blur)) saturate(1.2) brightness(var(--glass-brightness));
  -webkit-backdrop-filter: blur(var(--glass-blur)) saturate(1.2) brightness(var(--glass-brightness));
  border: 1px solid rgb(255 255 255 / 0.45);
  box-shadow:
    0 8px 22px rgb(from var(--primary) r g b / 0.20),
    0 1px 0 rgb(255 255 255 / 0.40) inset,
    0 -1px 0 rgb(0 0 0 / 0.08) inset;
  transition: background .25s ease, box-shadow .25s ease, backdrop-filter .25s ease;
}

/* scrim más fuerte para texto legible */
.glass-ios-primary-strong::before {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: inherit;
  pointer-events: none;
  background: rgba(255, 255, 255, 0.22); /* ↑ velo */
}

/* Dark mode */
.dark .glass-ios-primary-strong {
  background: linear-gradient(
    to bottom right,
    rgb(from var(--primary) r g b / 0.30),
    rgb(0 0 0 / 0.30)
  );
  border: 1px solid rgb(255 255 255 / 0.18);
  box-shadow:
    0 8px 26px rgb(0 0 0 / 0.45),
    0 1px 0 rgb(255 255 255 / 0.08) inset,
    0 -1px 0 rgb(0 0 0 / 0.45) inset;
}

/* Glass legible: más opaco, blur realista y scrim para texto */
.glass-ios-primary-readable {
  /* opacidad del tinte (sube si aún se lee el fondo) */
  --glass-bg1: rgb(from var(--primary) r g b / 0.78);
  --glass-bg2: rgb(from var(--primary) r g b / 0.62);

  /* blur efectivo (Chrome suele “tapar” > 24px) */
  --glass-blur: 22px;

  /* atenúa lo de atrás; baja más si hace falta (0.65–0.75) */
  --glass-brightness: 0.72;

  border-radius: var(--radius-lg);
  background: linear-gradient(to bottom right, var(--glass-bg1), var(--glass-bg2));
  backdrop-filter: blur(var(--glass-blur)) saturate(1.15) brightness(var(--glass-brightness));
  -webkit-backdrop-filter: blur(var(--glass-blur)) saturate(1.15) brightness(var(--glass-brightness));
  border: 1px solid rgb(255 255 255 / 0.45);
  box-shadow: 0 8px 22px rgb(from var(--primary) r g b / 0.20);
}

/* scrim para subir contraste del texto */
.glass-ios-primary-readable::before {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: inherit;
  pointer-events: none;
  background: rgba(255, 255, 255, 0.35); /* sube a 0.40 si hace falta */
}

@theme inline {
  --radius-sm: calc(var(--radius) - 4px);
  --radius-md: calc(var(--radius) - 2px);
  --radius-lg: var(--radius);
  --radius-xl: calc(var(--radius) + 4px);
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --color-card: var(--card);
  --color-card-foreground: var(--card-foreground);
  --color-popover: var(--popover);
  --color-popover-foreground: var(--popover-foreground);
  --color-primary: var(--primary);
  --color-primary-foreground: var(--primary-foreground);
  --color-secondary: var(--secondary);
  --color-secondary-foreground: var(--secondary-foreground);
  --color-muted: var(--muted);
  --color-muted-foreground: var(--muted-foreground);
  --color-accent: var(--accent);
  --color-accent-foreground: var(--accent-foreground);
  --color-destructive: var(--destructive);
  --color-border: var(--border);
  --color-input: var(--input);
  --color-ring: var(--ring);
  --color-chart-1: var(--chart-1);
  --color-chart-2: var(--chart-2);
  --color-chart-3: var(--chart-3);
  --color-chart-4: var(--chart-4);
  --color-chart-5: var(--chart-5);
  --color-sidebar: var(--sidebar);
  --color-sidebar-foreground: var(--sidebar-foreground);
  --color-sidebar-primary: var(--sidebar-primary);
  --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);
  --color-sidebar-accent: var(--sidebar-accent);
  --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);
  --color-sidebar-border: var(--sidebar-border);
  --color-sidebar-ring: var(--sidebar-ring);
}

:root {
  --radius: 0.625rem;
  --background: oklch(1 0 0);
  --foreground: oklch(0.145 0 0);
  --card: oklch(1 0 0);
  --card-foreground: oklch(0.145 0 0);
  --popover: oklch(1 0 0);
  --popover-foreground: oklch(0.145 0 0);
  --primary: rgb(78, 185, 197);
  --primary-foreground: oklch(0.985 0 0);
  --secondary: rgb(236, 153, 146);
  --secondary-foreground: oklch(0.205 0 0);
  --muted: oklch(0.97 0 0);
  --muted-foreground: oklch(0.556 0 0);
  --accent: oklch(0.97 0 0);
  --accent-foreground: oklch(0.205 0 0);
  --destructive: oklch(0.577 0.245 27.325);
  --border: oklch(0.922 0 0);
  --input: oklch(0.922 0 0);
  --ring: oklch(0.708 0 0);
  --chart-1: oklch(0.646 0.222 41.116);
  --chart-2: oklch(0.6 0.118 184.704);
  --chart-3: oklch(0.398 0.07 227.392);
  --chart-4: oklch(0.828 0.189 84.429);
  --chart-5: oklch(0.769 0.188 70.08);
  --sidebar: oklch(0.985 0 0);
  --sidebar-foreground: oklch(0.145 0 0);
  --sidebar-primary: oklch(0.205 0 0);
  --sidebar-primary-foreground: oklch(0.985 0 0);
  --sidebar-accent: oklch(0.97 0 0);
  --sidebar-accent-foreground: oklch(0.205 0 0);
  --sidebar-border: oklch(0.922 0 0);
  --sidebar-ring: oklch(0.708 0 0);
}

.dark {
  --background: oklch(0.145 0 0);
  --foreground: oklch(0.985 0 0);
  --card: oklch(0.205 0 0);
  --card-foreground: oklch(0.985 0 0);
  --popover: oklch(0.205 0 0);
  --popover-foreground: oklch(0.985 0 0);
  --primary: oklch(0.922 0 0);
  --primary-foreground: oklch(0.205 0 0);
  --secondary: oklch(0.269 0 0);
  --secondary-foreground: oklch(0.985 0 0);
  --muted: oklch(0.269 0 0);
  --muted-foreground: oklch(0.708 0 0);
  --accent: oklch(0.269 0 0);
  --accent-foreground: oklch(0.985 0 0);
  --destructive: oklch(0.704 0.191 22.216);
  --border: oklch(1 0 0 / 10%);
  --input: oklch(1 0 0 / 15%);
  --ring: oklch(0.556 0 0);
  --chart-1: oklch(0.488 0.243 264.376);
  --chart-2: oklch(0.696 0.17 162.48);
  --chart-3: oklch(0.769 0.188 70.08);
  --chart-4: oklch(0.627 0.265 303.9);
  --chart-5: oklch(0.645 0.246 16.439);
  --sidebar: oklch(0.205 0 0);
  --sidebar-foreground: oklch(0.985 0 0);
  --sidebar-primary: oklch(0.488 0.243 264.376);
  --sidebar-primary-foreground: oklch(0.985 0 0);
  --sidebar-accent: oklch(0.269 0 0);
  --sidebar-accent-foreground: oklch(0.985 0 0);
  --sidebar-border: oklch(1 0 0 / 10%);
  --sidebar-ring: oklch(0.556 0 0);
}

/* Asegura que el árbol pueda usar alturas relativas sin vh */
html, body, #root {
  height: 100%;
  min-height: 0; /* importante para que los hijos con min-h-0 funcionen */
}

@layer base {
  * {
    @apply border-border outline-ring/50;
  }
  body {
    @apply bg-background text-foreground;
  }
}

/* Vidrio real (frosted) con blur fuerte aplicado en ::before */
.glass-true-blur-primary {
  isolation: isolate;          /* asegura stacking propio */
  border-radius: var(--radius-lg);
  overflow: hidden;            /* recorta el blur al radio */
  border: 1px solid rgba(255,255,255,0.35);
  box-shadow: 0 10px 24px rgb(0 0 0 / 0.12);
}

/* Capa de blur + tinte + highlight */
.glass-true-blur-primary::before {
  content: "";
  position: absolute;
  inset: -2px;                 /* cubre borde para evitar halos */
  z-index: 0;
  backdrop-filter: blur(26px) saturate(1.6) brightness(0.9);
  -webkit-backdrop-filter: blur(26px) saturate(1.6) brightness(0.9);
  background:
    /* brillo suave superior */
    linear-gradient(to bottom, rgba(255,255,255,0.18), rgba(255,255,255,0.05)),
    /* tinte primary translúcido */
    linear-gradient(to bottom right,
      rgb(from var(--primary) r g b / 0.28),
      rgb(from var(--primary) r g b / 0.16)
    );
}

/* Grano sutil para sensación de vidrio */
.glass-true-blur-primary::after {
  content: "";
  position: absolute;
  inset: 0;
  z-index: 0;
  pointer-events: none;
  background-image:
    radial-gradient(1px 1px at 25% 20%, rgba(255,255,255,0.08) 0, transparent 60%),
    radial-gradient(1px 1px at 60% 40%, rgba(0,0,0,0.06) 0, transparent 55%);
  opacity: .35;
  mix-blend-mode: soft-light;
}

/* Contenido por encima del blur */
.glass-true-blur-primary > * {
  position: relative;
  z-index: 1;
}

.frost-primary {
  isolation: isolate;              /* su propio stacking */
  overflow: hidden;                /* respeta el radio */
  border-radius: var(--radius-lg);
  /* Tinte primary semitransparente; sube/baja 0.22 según necesites */
  background: color-mix(in srgb, var(--color-primary) 22%, transparent);
  /* Mismo efecto que SemiGauge, pero un poco más fuerte por área mayor */
  backdrop-filter: blur(24px) saturate(1.2);
  -webkit-backdrop-filter: blur(24px) saturate(1.2);
  border: 1px solid rgba(255, 255, 255, 0.35);
  box-shadow: 0 8px 20px rgb(0 0 0 / 0.12);
}

/* Si quieres más contraste rápido sin tocar el JSX */
.frost-primary[data-contrast="high"] {
  background: color-mix(in srgb, var(--color-primary) 30%, transparent);
  backdrop-filter: blur(14px) saturate(1.25);
  -webkit-backdrop-filter: blur(14px) saturate(1.25);
}

/* Utilidades para fondo primary con opacidad (hover/active) */
.bgp-hover {
  transition: background-color .2s ease, color .2s ease;
}
.bgp-hover:hover {
  background-color: color-mix(in srgb, var(--color-primary) 12%, transparent);
  color: var(--color-primary);
}

.bgp-active {
  background-color: color-mix(in srgb, var(--color-primary) 50%, transparent);
  color: var(--color-primary-foreground, #fff);
}

/* Opción del dropdown: hover/activo con primary */
.nav-dd-item {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.5rem 1rem;
  border-radius: 0.375rem; /* md */
  transition: background-color .2s ease, color .2s ease;
}
.nav-dd-item:hover {
  background-color: color-mix(in srgb, var(--color-primary, #0ea5e9) 12%, #ffffff);
  color: var(--color-primary, #0ea5e9);
}
.nav-dd-item.is-active {
  background-color: color-mix(in srgb, var(--color-primary, #0ea5e9) 50%, #ffffff);
  color: var(--color-primary-foreground, #ffffff);
}

/* ================= Planificación Tokens (Mejor práctica) =================
   Sistema declarativo de escalado para la vista de Planificación.
   - Usa variables -> tamaño nítido (no transform)
   - Permite cambiar densidad agregando una clase de escala
   - Reemplaza a .planif-zoom (transform) que queda DEPRECATED
========================================================================= */
:root { --planif-scale: 1; }
.planif-scale-110 { --planif-scale: 1.1; }
.planif-scale-100 { --planif-scale: 1; }

/* Definición de tokens dependientes de la escala */
.planif-vars {
  /* Espaciados base (multiplican rem) */
  --planif-gap-3: calc(0.75rem * var(--planif-scale));
  --planif-gap-4: calc(1rem * var(--planif-scale));
  --planif-gap-5: calc(1.25rem * var(--planif-scale));
  --planif-gap-6: calc(1.5rem * var(--planif-scale));
  /* Nuevos tamaños extendidos */
  --planif-gap-7: calc(1.75rem * var(--planif-scale));
  --planif-gap-8: calc(2rem * var(--planif-scale));
  --planif-gap-9: calc(2.25rem * var(--planif-scale));
  --planif-gap-10: calc(2.5rem * var(--planif-scale));
  --planif-space-2-5: calc(0.625rem * var(--planif-scale));
  --planif-gap-x-main: calc(2.5rem * var(--planif-scale)); /* antes gap-x-10 */
  --planif-space-x-bottom: calc(2rem * var(--planif-scale)); /* antes space-x-8 */
  /* Padding de cards específicos de esta vista */
  --planif-card-pad-x: calc(1rem * var(--planif-scale)); /* px-4 */
  --planif-card-pad-y: calc(0.625rem * var(--planif-scale)); /* py-2.5 */
  /* Alturas opcionales (se pueden mapear luego) */
  --planif-chart-height: calc(20rem * var(--planif-scale));
  /* Escala tipografía y radios/bordes para percepción uniforme */
  font-size: calc(1rem * var(--planif-scale));
  line-height: 1.45;
  --planif-radius: calc(0.625rem * var(--planif-scale));
}

/* Ajustes específicos de elementos internos en la vista (opt-in por clase) */
.planif-vars .planif-icon-sm {
  width: calc(1.5rem * var(--planif-scale));
  height: calc(1.5rem * var(--planif-scale));
  font-size: calc(0.9rem * var(--planif-scale));
}
.planif-vars .planif-badge {
  padding: calc(0.125rem * var(--planif-scale)) calc(0.5rem * var(--planif-scale));
  font-size: calc(0.55rem * var(--planif-scale));
  line-height: 1.1;
  border-radius: calc(9999px);
}
.planif-vars .planif-card-pad {
  padding: var(--planif-card-pad-y) var(--planif-card-pad-x);
}

/* (Eliminada .planif-zoom legacy: se migró a tokens) */

/* Puedes poner esto en tu archivo global de estilos o en el CSS del componente */
.input-no-spinner::-webkit-outer-spin-button,
.input-no-spinner::-webkit-inner-spin-button {
  -webkit-appearance: none;
  margin: 0;
}
.input-no-spinner[type="number"] {
  -moz-appearance: textfield;
}

